<body class="bg-blue-500">
<div th:fragment="content">

<!-- Bus Cards Wrapper -->
<div id="busCardContainer" class="grid gap-6 md:grid-cols-2 lg:grid-cols-2">
  <div th:each="bus : ${buses}" class="bus-card bg-white rounded-xl shadow-lg p-6 relative border-l-4 border-blue-600 hidden">
    <!-- Header -->
    <div class="flex justify-between items-center mb-2">
      <h3 class="text-xl font-bold text-gray-800" th:text="${bus.busName}">Volvo Express</h3>
      <span class="text-sm font-medium text-blue-600" th:text="${bus.busType}">AC Sleeper</span>
    </div>

    <!-- Route -->
    <div class="flex justify-between items-center mb-4 text-sm text-gray-600">
      <div>
        <span class="font-semibold" th:text="${bus.routeFrom}">Delhi</span>
        <span> → </span>
        <span class="font-semibold" th:text="${bus.routeTo}">Jaipur</span>
      </div>
      <div>
        <span th:text="${bus.busJourneyDate}">2025-07-09</span>
      </div>
    </div>

    <!-- Timings -->
    <div class="flex justify-between text-xs text-gray-500 mb-4">
      <div>
        <p class="font-semibold">Departure:</p>
        <p th:text="${bus.departureTime}">10:00 AM</p>
      </div>
      <div>
        <p class="font-semibold">Arrival:</p>
        <p th:text="${bus.arrivalTime}">2:30 PM</p>
      </div>
    <div>
        <p class="font-semibold">Seats:</p>
        <p th:text="${bus.seats}">40</p>
      </div>
    </div>

    <!-- Footer -->
    <div class="flex justify-between items-center border-t pt-3">
      <div>
        <p class="text-xs text-gray-500">Distance: <span th:text="${bus.distance}">260</span> km</p>
        <p class="text-xs text-gray-500">Driver: <span th:text="${bus.driverName}">Mr. Sharma</span></p>
      </div>
      <div class="text-right">
        <p class="text-lg font-bold text-green-600">₹<span th:text="${bus.fare}">650</span></p>
        <form th:action="@{/bookings/addBooking}" method="get">
          <input type="hidden" name="busId" th:value="${bus.busId}" />
          <button
            type="submit"
            class="mt-2 inline-block bg-blue-500 hover:bg-blue-600 text-white px-4 py-1 text-sm rounded-full transition"
          >
            Book Now
          </button>
        </form>
      </div>
    </div>
  </div>
</div>


<!-- Pagination -->
<div class="mt-6 flex justify-center items-center gap-3">
  <button onclick="prevPage()" class="bg-gray-500 text-white px-4 py-1 rounded-full hover:bg-gray-600 transition">Prev</button>
  <span id="pageIndicator" class="text-white font-semibold text-sm"></span>
  <button onclick="nextPage()" class="bg-gray-500 text-white px-4 py-1 rounded-full hover:bg-gray-600 transition">Next</button>
</div>


<script>
  const cardsPerPage = 6;
  let currentPage = 1;

  function paginateCards() {
    const cards = document.querySelectorAll('.bus-card');
    const totalPages = Math.ceil(cards.length / cardsPerPage);
    document.getElementById('pageIndicator').innerText = `Page ${currentPage} of ${totalPages}`;

    cards.forEach((card, index) => {
      card.style.display =
        index >= (currentPage - 1) * cardsPerPage && index < currentPage * cardsPerPage ? 'block' : 'none';
    });
  }

  function nextPage() {
    const cards = document.querySelectorAll('.bus-card');
    const totalPages = Math.ceil(cards.length / cardsPerPage);
    if (currentPage < totalPages) {
      currentPage++;
      paginateCards();
    }
  }

  function prevPage() {
    if (currentPage > 1) {
      currentPage--;
      paginateCards();
    }
  }

  window.onload = paginateCards;
</script>

</div>
</body>
